From 87c0e76de3168d667e7ba9f96fe74b91cb2f4cf3 Mon Sep 17 00:00:00 2001
From: zondax <info@zondax.ch>
Date: Mon, 4 Oct 2021 10:00:06 +0000
Subject: [PATCH 2/2] make: use proper Rust target

---
 framework/host/src/Makefile | 4 +---
 framework/ta/src/sub.mk     | 4 +---
 2 files changed, 2 insertions(+), 6 deletions(-)

diff --git a/framework/host/src/Makefile b/framework/host/src/Makefile
index fff2490..41c1634 100644
--- a/framework/host/src/Makefile
+++ b/framework/host/src/Makefile
@@ -18,9 +18,7 @@ LDLIBS 	+= -lpthread
 LDLIBS 	+= -lm
 LDLIBS 	+= -ldl
 
-# Add both search paths
-LDLIBS 	+= -L../target/armv7-unknown-linux-gnueabihf/release
-LDLIBS 	+= -L../target/aarch64-unknown-linux-gnu/release
+LDLIBS 	+= -L../target/${RUST_TARGET}/release
 
 ifdef OVERRIDE_SYSROOT
 LDLIBS 	+= --sysroot=$(TEEC_EXPORT)
diff --git a/framework/ta/src/sub.mk b/framework/ta/src/sub.mk
index a091dea..38099b0 100644
--- a/framework/ta/src/sub.mk
+++ b/framework/ta/src/sub.mk
@@ -2,6 +2,4 @@ global-incdirs-y += include
 srcs-y += rustee_ta.c
 
 libnames += rustee_ta
-# Add both search paths
-libdirs	+= ../target/armv7-unknown-linux-gnueabihf/release
-libdirs	+= ../target/aarch64-unknown-linux-gnu/release
+libdirs	+= ../target/${RUST_TARGET}/release
-- 
2.17.1

